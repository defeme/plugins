/**
 * Diff Match and Patch
 *
 * Copyright 2006 Google Inc.
 * http://code.google.com/p/google-diff-match-patch/
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 */
function diff_match_patch(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0;diff_match_patch.Diff,diff_match_patch.prototype.diff_main=function(a,b,c,d){var e,f,g,h,i,j;if("undefined"==typeof d&&(d=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),e=d,null==a||null==b)throw new Error("Null input. (diff_main)");return a==b?a?[[DIFF_EQUAL,a]]:[]:("undefined"==typeof c&&(c=!0),f=c,g=this.diff_commonPrefix(a,b),h=a.substring(0,g),a=a.substring(g),b=b.substring(g),g=this.diff_commonSuffix(a,b),i=a.substring(a.length-g),a=a.substring(0,a.length-g),b=b.substring(0,b.length-g),j=this.diff_compute_(a,b,f,e),h&&j.unshift([DIFF_EQUAL,h]),i&&j.push([DIFF_EQUAL,i]),this.diff_cleanupMerge(j),j)},diff_match_patch.prototype.diff_compute_=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p;return a?b?(f=a.length>b.length?a:b,g=a.length>b.length?b:a,h=f.indexOf(g),-1!=h?(e=[[DIFF_INSERT,f.substring(0,h)],[DIFF_EQUAL,g],[DIFF_INSERT,f.substring(h+g.length)]],a.length>b.length&&(e[0][0]=e[2][0]=DIFF_DELETE),e):1==g.length?[[DIFF_DELETE,a],[DIFF_INSERT,b]]:(i=this.diff_halfMatch_(a,b),i?(j=i[0],k=i[1],l=i[2],m=i[3],n=i[4],o=this.diff_main(j,l,c,d),p=this.diff_main(k,m,c,d),o.concat([[DIFF_EQUAL,n]],p)):c&&a.length>100&&b.length>100?this.diff_lineMode_(a,b,d):this.diff_bisect_(a,b,d))):[[DIFF_DELETE,a]]:[[DIFF_INSERT,b]]},diff_match_patch.prototype.diff_lineMode_=function(a,b,c){var e,f,g,h,i,j,k,l,d=this.diff_linesToChars_(a,b);for(a=d.chars1,b=d.chars2,e=d.lineArray,f=this.diff_main(a,b,!1,c),this.diff_charsToLines_(f,e),this.diff_cleanupSemantic(f),f.push([DIFF_EQUAL,""]),g=0,h=0,i=0,j="",k="";g<f.length;){switch(f[g][0]){case DIFF_INSERT:i++,k+=f[g][1];break;case DIFF_DELETE:h++,j+=f[g][1];break;case DIFF_EQUAL:if(h>=1&&i>=1){for(f.splice(g-h-i,h+i),g=g-h-i,d=this.diff_main(j,k,!1,c),l=d.length-1;l>=0;l--)f.splice(g,0,d[l]);g+=d.length}i=0,h=0,j="",k=""}g++}return f.pop(),f},diff_match_patch.prototype.diff_bisect_=function(a,b,c){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,d=a.length,e=b.length,f=Math.ceil((d+e)/2),g=f,h=2*f,i=new Array(h),j=new Array(h);for(k=0;h>k;k++)i[k]=-1,j[k]=-1;for(i[g+1]=0,j[g+1]=0,l=d-e,m=0!=l%2,n=0,o=0,p=0,q=0,r=0;f>r&&!((new Date).getTime()>c);r++){for(s=-r+n;r-o>=s;s+=2){for(t=g+s,u=s==-r||s!=r&&i[t-1]<i[t+1]?i[t+1]:i[t-1]+1,v=u-s;d>u&&e>v&&a.charAt(u)==b.charAt(v);)u++,v++;if(i[t]=u,u>d)o+=2;else if(v>e)n+=2;else if(m&&(w=g+l-s,w>=0&&h>w&&-1!=j[w]&&(x=d-j[w],u>=x)))return this.diff_bisectSplit_(a,b,u,v,c)}for(y=-r+p;r-q>=y;y+=2){for(w=g+y,x=y==-r||y!=r&&j[w-1]<j[w+1]?j[w+1]:j[w-1]+1,z=x-y;d>x&&e>z&&a.charAt(d-x-1)==b.charAt(e-z-1);)x++,z++;if(j[w]=x,x>d)q+=2;else if(z>e)p+=2;else if(!m&&(t=g+l-y,t>=0&&h>t&&-1!=i[t]&&(u=i[t],v=g+u-t,x=d-x,u>=x)))return this.diff_bisectSplit_(a,b,u,v,c)}}return[[DIFF_DELETE,a],[DIFF_INSERT,b]]},diff_match_patch.prototype.diff_bisectSplit_=function(a,b,c,d,e){var f=a.substring(0,c),g=b.substring(0,d),h=a.substring(c),i=b.substring(d),j=this.diff_main(f,g,!1,e),k=this.diff_main(h,i,!1,e);return j.concat(k)},diff_match_patch.prototype.diff_linesToChars_=function(a,b){function e(a){for(var h,b="",e=0,f=-1,g=c.length;f<a.length-1;)f=a.indexOf("\n",e),-1==f&&(f=a.length-1),h=a.substring(e,f+1),e=f+1,(d.hasOwnProperty?d.hasOwnProperty(h):void 0!==d[h])?b+=String.fromCharCode(d[h]):(b+=String.fromCharCode(g),d[h]=g,c[g++]=h);return b}var f,g,c=[],d={};return c[0]="",f=e(a),g=e(b),{chars1:f,chars2:g,lineArray:c}},diff_match_patch.prototype.diff_charsToLines_=function(a,b){var c,d,e,f;for(c=0;c<a.length;c++){for(d=a[c][1],e=[],f=0;f<d.length;f++)e[f]=b[d.charCodeAt(f)];a[c][1]=e.join("")}},diff_match_patch.prototype.diff_commonPrefix=function(a,b){var c,d,e,f;if(!a||!b||a.charAt(0)!=b.charAt(0))return 0;for(c=0,d=Math.min(a.length,b.length),e=d,f=0;e>c;)a.substring(f,e)==b.substring(f,e)?(c=e,f=c):d=e,e=Math.floor((d-c)/2+c);return e},diff_match_patch.prototype.diff_commonSuffix=function(a,b){var c,d,e,f;if(!a||!b||a.charAt(a.length-1)!=b.charAt(b.length-1))return 0;for(c=0,d=Math.min(a.length,b.length),e=d,f=0;e>c;)a.substring(a.length-e,a.length-f)==b.substring(b.length-e,b.length-f)?(c=e,f=c):d=e,e=Math.floor((d-c)/2+c);return e},diff_match_patch.prototype.diff_commonOverlap_=function(a,b){var e,f,g,h,i,c=a.length,d=b.length;if(0==c||0==d)return 0;if(c>d?a=a.substring(c-d):d>c&&(b=b.substring(0,c)),e=Math.min(c,d),a==b)return e;for(f=0,g=1;;){if(h=a.substring(e-g),i=b.indexOf(h),-1==i)return f;g+=i,(0==i||a.substring(e-g)==b.substring(0,g))&&(f=g,g++)}},diff_match_patch.prototype.diff_halfMatch_=function(a,b){function f(a,b,c){for(var h,i,j,k,l,m,d=a.substring(c,c+Math.floor(a.length/4)),f=-1,g="";-1!=(f=b.indexOf(d,f+1));)l=e.diff_commonPrefix(a.substring(c),b.substring(f)),m=e.diff_commonSuffix(a.substring(0,c),b.substring(0,f)),g.length<m+l&&(g=b.substring(f-m,f)+b.substring(f,f+l),h=a.substring(0,c-m),i=a.substring(c+l),j=b.substring(0,f-m),k=b.substring(f+l));return 2*g.length>=a.length?[h,i,j,k,g]:null}var c,d,e,g,h,i,j,k,l,m,n;return this.Diff_Timeout<=0?null:(c=a.length>b.length?a:b,d=a.length>b.length?b:a,c.length<4||2*d.length<c.length?null:(e=this,g=f(c,d,Math.ceil(c.length/4)),h=f(c,d,Math.ceil(c.length/2)),g||h?(i=h?g?g[4].length>h[4].length?g:h:h:g,a.length>b.length?(j=i[0],k=i[1],l=i[2],m=i[3]):(l=i[0],m=i[1],j=i[2],k=i[3]),n=i[4],[j,k,l,m,n]):null))},diff_match_patch.prototype.diff_cleanupSemantic=function(a){for(var k,l,m,n,b=!1,c=[],d=0,e=null,f=0,g=0,h=0,i=0,j=0;f<a.length;)a[f][0]==DIFF_EQUAL?(c[d++]=f,g=i,h=j,i=0,j=0,e=a[f][1]):(a[f][0]==DIFF_INSERT?i+=a[f][1].length:j+=a[f][1].length,e&&e.length<=Math.max(g,h)&&e.length<=Math.max(i,j)&&(a.splice(c[d-1],0,[DIFF_DELETE,e]),a[c[d-1]+1][0]=DIFF_INSERT,d--,d--,f=d>0?c[d-1]:-1,g=0,h=0,i=0,j=0,e=null,b=!0)),f++;for(b&&this.diff_cleanupMerge(a),this.diff_cleanupSemanticLossless(a),f=1;f<a.length;)a[f-1][0]==DIFF_DELETE&&a[f][0]==DIFF_INSERT&&(k=a[f-1][1],l=a[f][1],m=this.diff_commonOverlap_(k,l),n=this.diff_commonOverlap_(l,k),m>=n?(m>=k.length/2||m>=l.length/2)&&(a.splice(f,0,[DIFF_EQUAL,l.substring(0,m)]),a[f-1][1]=k.substring(0,k.length-m),a[f+1][1]=l.substring(m),f++):(n>=k.length/2||n>=l.length/2)&&(a.splice(f,0,[DIFF_EQUAL,k.substring(0,n)]),a[f-1][0]=DIFF_INSERT,a[f-1][1]=l.substring(0,l.length-n),a[f+1][0]=DIFF_DELETE,a[f+1][1]=k.substring(n),f++),f++),f++},diff_match_patch.prototype.diff_cleanupSemanticLossless=function(a){function b(a,b){var c,d,e,f,g,h,i,j,k,l;return a&&b?(c=a.charAt(a.length-1),d=b.charAt(0),e=c.match(diff_match_patch.nonAlphaNumericRegex_),f=d.match(diff_match_patch.nonAlphaNumericRegex_),g=e&&c.match(diff_match_patch.whitespaceRegex_),h=f&&d.match(diff_match_patch.whitespaceRegex_),i=g&&c.match(diff_match_patch.linebreakRegex_),j=h&&d.match(diff_match_patch.linebreakRegex_),k=i&&a.match(diff_match_patch.blanklineEndRegex_),l=j&&b.match(diff_match_patch.blanklineStartRegex_),k||l?5:i||j?4:e&&!g&&h?3:g||h?2:e||f?1:0):6}for(var d,e,f,g,h,i,j,k,l,m,c=1;c<a.length-1;){if(a[c-1][0]==DIFF_EQUAL&&a[c+1][0]==DIFF_EQUAL){for(d=a[c-1][1],e=a[c][1],f=a[c+1][1],g=this.diff_commonSuffix(d,e),g&&(h=e.substring(e.length-g),d=d.substring(0,d.length-g),e=h+e.substring(0,e.length-g),f=h+f),i=d,j=e,k=f,l=b(d,e)+b(e,f);e.charAt(0)===f.charAt(0);)d+=e.charAt(0),e=e.substring(1)+f.charAt(0),f=f.substring(1),m=b(d,e)+b(e,f),m>=l&&(l=m,i=d,j=e,k=f);a[c-1][1]!=i&&(i?a[c-1][1]=i:(a.splice(c-1,1),c--),a[c][1]=j,k?a[c+1][1]=k:(a.splice(c+1,1),c--))}c++}},diff_match_patch.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,diff_match_patch.whitespaceRegex_=/\s/,diff_match_patch.linebreakRegex_=/[\r\n]/,diff_match_patch.blanklineEndRegex_=/\n\r?\n$/,diff_match_patch.blanklineStartRegex_=/^\r?\n\r?\n/,diff_match_patch.prototype.diff_cleanupEfficiency=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=!1,h=!1,i=!1,j=!1;f<a.length;)a[f][0]==DIFF_EQUAL?(a[f][1].length<this.Diff_EditCost&&(i||j)?(c[d++]=f,g=i,h=j,e=a[f][1]):(d=0,e=null),i=j=!1):(a[f][0]==DIFF_DELETE?j=!0:i=!0,e&&(g&&h&&i&&j||e.length<this.Diff_EditCost/2&&3==g+h+i+j)&&(a.splice(c[d-1],0,[DIFF_DELETE,e]),a[c[d-1]+1][0]=DIFF_INSERT,d--,e=null,g&&h?(i=j=!0,d=0):(d--,f=d>0?c[d-1]:-1,i=j=!1),b=!0)),f++;b&&this.diff_cleanupMerge(a)},diff_match_patch.prototype.diff_cleanupMerge=function(a){var b,c,d,e,f,g,h;for(a.push([DIFF_EQUAL,""]),b=0,c=0,d=0,e="",f="";b<a.length;)switch(a[b][0]){case DIFF_INSERT:d++,f+=a[b][1],b++;break;case DIFF_DELETE:c++,e+=a[b][1],b++;break;case DIFF_EQUAL:c+d>1?(0!==c&&0!==d&&(g=this.diff_commonPrefix(f,e),0!==g&&(b-c-d>0&&a[b-c-d-1][0]==DIFF_EQUAL?a[b-c-d-1][1]+=f.substring(0,g):(a.splice(0,0,[DIFF_EQUAL,f.substring(0,g)]),b++),f=f.substring(g),e=e.substring(g)),g=this.diff_commonSuffix(f,e),0!==g&&(a[b][1]=f.substring(f.length-g)+a[b][1],f=f.substring(0,f.length-g),e=e.substring(0,e.length-g))),0===c?a.splice(b-d,c+d,[DIFF_INSERT,f]):0===d?a.splice(b-c,c+d,[DIFF_DELETE,e]):a.splice(b-c-d,c+d,[DIFF_DELETE,e],[DIFF_INSERT,f]),b=b-c-d+(c?1:0)+(d?1:0)+1):0!==b&&a[b-1][0]==DIFF_EQUAL?(a[b-1][1]+=a[b][1],a.splice(b,1)):b++,d=0,c=0,e="",f=""}for(""===a[a.length-1][1]&&a.pop(),h=!1,b=1;b<a.length-1;)a[b-1][0]==DIFF_EQUAL&&a[b+1][0]==DIFF_EQUAL&&(a[b][1].substring(a[b][1].length-a[b-1][1].length)==a[b-1][1]?(a[b][1]=a[b-1][1]+a[b][1].substring(0,a[b][1].length-a[b-1][1].length),a[b+1][1]=a[b-1][1]+a[b+1][1],a.splice(b-1,1),h=!0):a[b][1].substring(0,a[b+1][1].length)==a[b+1][1]&&(a[b-1][1]+=a[b+1][1],a[b][1]=a[b][1].substring(a[b+1][1].length)+a[b+1][1],a.splice(b+1,1),h=!0)),b++;h&&this.diff_cleanupMerge(a)},diff_match_patch.prototype.diff_xIndex=function(a,b){var g,c=0,d=0,e=0,f=0;for(g=0;g<a.length&&(a[g][0]!==DIFF_INSERT&&(c+=a[g][1].length),a[g][0]!==DIFF_DELETE&&(d+=a[g][1].length),!(c>b));g++)e=c,f=d;return a.length!=g&&a[g][0]===DIFF_DELETE?f:f+(b-e)},diff_match_patch.prototype.diff_prettyHtml=function(a){var g,h,i,j,b=[],c=/&/g,d=/</g,e=/>/g,f=/\n/g;for(g=0;g<a.length;g++)switch(h=a[g][0],i=a[g][1],j=i.replace(c,"&amp;").replace(d,"&lt;").replace(e,"&gt;").replace(f,"&para;<br>"),h){case DIFF_INSERT:b[g]='<ins style="background:#e6ffe6;">'+j+"</ins>";break;case DIFF_DELETE:b[g]='<del style="background:#ffe6e6;">'+j+"</del>";break;case DIFF_EQUAL:b[g]="<span>"+j+"</span>"}return b.join("")},diff_match_patch.prototype.diff_text1=function(a){var c,b=[];for(c=0;c<a.length;c++)a[c][0]!==DIFF_INSERT&&(b[c]=a[c][1]);return b.join("")},diff_match_patch.prototype.diff_text2=function(a){var c,b=[];for(c=0;c<a.length;c++)a[c][0]!==DIFF_DELETE&&(b[c]=a[c][1]);return b.join("")},diff_match_patch.prototype.diff_levenshtein=function(a){var e,f,g,b=0,c=0,d=0;for(e=0;e<a.length;e++)switch(f=a[e][0],g=a[e][1],f){case DIFF_INSERT:c+=g.length;break;case DIFF_DELETE:d+=g.length;break;case DIFF_EQUAL:b+=Math.max(c,d),c=0,d=0}return b+=Math.max(c,d)},diff_match_patch.prototype.diff_toDelta=function(a){var c,b=[];for(c=0;c<a.length;c++)switch(a[c][0]){case DIFF_INSERT:b[c]="+"+encodeURI(a[c][1]);break;case DIFF_DELETE:b[c]="-"+a[c][1].length;break;case DIFF_EQUAL:b[c]="="+a[c][1].length}return b.join("  ").replace(/%20/g," ")},diff_match_patch.prototype.diff_fromDelta=function(a,b){var g,h,j,k,c=[],d=0,e=0,f=b.split(/\t/g);for(g=0;g<f.length;g++)switch(h=f[g].substring(1),f[g].charAt(0)){case"+":try{c[d++]=[DIFF_INSERT,decodeURI(h)]}catch(i){throw new Error("Illegal escape in diff_fromDelta: "+h)}break;case"-":case"=":if(j=parseInt(h,10),isNaN(j)||0>j)throw new Error("Invalid number in diff_fromDelta: "+h);k=a.substring(e,e+=j),c[d++]="="==f[g].charAt(0)?[DIFF_EQUAL,k]:[DIFF_DELETE,k];break;default:if(f[g])throw new Error("Invalid diff operation in diff_fromDelta: "+f[g])}if(e!=a.length)throw new Error("Delta length ("+e+") does not equal source text length ("+a.length+").");return c},diff_match_patch.prototype.match_main=function(a,b,c){if(null==a||null==b||null==c)throw new Error("Null input. (match_main)");return c=Math.max(0,Math.min(c,a.length)),a==b?0:a.length?a.substring(c,c+b.length)==b?c:this.match_bitap_(a,b,c):-1},diff_match_patch.prototype.match_bitap_=function(a,b,c){function f(a,d){var f=a/b.length,g=Math.abs(c-d);return e.Match_Distance?f+g/e.Match_Distance:g?1:f}var d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(b.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");for(d=this.match_alphabet_(b),e=this,g=this.Match_Threshold,h=a.indexOf(b,c),-1!=h&&(g=Math.min(f(0,h),g),h=a.lastIndexOf(b,c+b.length),-1!=h&&(g=Math.min(f(0,h),g))),i=1<<b.length-1,h=-1,l=b.length+a.length,n=0;n<b.length;n++){for(j=0,k=l;k>j;)f(n,c+k)<=g?j=k:l=k,k=Math.floor((l-j)/2+j);for(l=k,o=Math.max(1,c-k+1),p=Math.min(c+k,a.length)+b.length,q=Array(p+2),q[p+1]=(1<<n)-1,r=p;r>=o;r--)if(s=d[a.charAt(r-1)],q[r]=0===n?(1|q[r+1]<<1)&s:(1|q[r+1]<<1)&s|(1|(m[r+1]|m[r])<<1)|m[r+1],q[r]&i&&(t=f(n,r-1),g>=t)){if(g=t,h=r-1,!(h>c))break;o=Math.max(1,2*c-h)}if(f(n+1,c)>g)break;m=q}return h},diff_match_patch.prototype.match_alphabet_=function(a){var c,b={};for(c=0;c<a.length;c++)b[a.charAt(c)]=0;for(c=0;c<a.length;c++)b[a.charAt(c)]|=1<<a.length-c-1;return b},diff_match_patch.prototype.patch_addContext_=function(a,b){var c,d,e,f;if(0!=b.length){for(c=b.substring(a.start2,a.start2+a.length1),d=0;b.indexOf(c)!=b.lastIndexOf(c)&&c.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)d+=this.Patch_Margin,c=b.substring(a.start2-d,a.start2+a.length1+d);d+=this.Patch_Margin,e=b.substring(a.start2-d,a.start2),e&&a.diffs.unshift([DIFF_EQUAL,e]),f=b.substring(a.start2+a.length1,a.start2+a.length1+d),f&&a.diffs.push([DIFF_EQUAL,f]),a.start1-=e.length,a.start2-=e.length,a.length1+=e.length+f.length,a.length2+=e.length+f.length}},diff_match_patch.prototype.patch_make=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;if("string"==typeof a&&"string"==typeof b&&"undefined"==typeof c)d=a,e=this.diff_main(d,b,!0),e.length>2&&(this.diff_cleanupSemantic(e),this.diff_cleanupEfficiency(e));else if(a&&"object"==typeof a&&"undefined"==typeof b&&"undefined"==typeof c)e=a,d=this.diff_text1(e);else if("string"==typeof a&&b&&"object"==typeof b&&"undefined"==typeof c)d=a,e=b;else{if("string"!=typeof a||"string"!=typeof b||!c||"object"!=typeof c)throw new Error("Unknown call format to patch_make.");d=a,e=c}if(0===e.length)return[];for(f=[],g=new diff_match_patch.patch_obj,h=0,i=0,j=0,k=d,l=d,m=0;m<e.length;m++){switch(n=e[m][0],o=e[m][1],h||n===DIFF_EQUAL||(g.start1=i,g.start2=j),n){case DIFF_INSERT:g.diffs[h++]=e[m],g.length2+=o.length,l=l.substring(0,j)+o+l.substring(j);break;case DIFF_DELETE:g.length1+=o.length,g.diffs[h++]=e[m],l=l.substring(0,j)+l.substring(j+o.length);break;case DIFF_EQUAL:o.length<=2*this.Patch_Margin&&h&&e.length!=m+1?(g.diffs[h++]=e[m],g.length1+=o.length,g.length2+=o.length):o.length>=2*this.Patch_Margin&&h&&(this.patch_addContext_(g,k),f.push(g),g=new diff_match_patch.patch_obj,h=0,k=l,i=j)}n!==DIFF_INSERT&&(i+=o.length),n!==DIFF_DELETE&&(j+=o.length)}return h&&(this.patch_addContext_(g,k),f.push(g)),f},diff_match_patch.prototype.patch_deepCopy=function(a){var c,d,e,f,b=[];for(c=0;c<a.length;c++){for(d=a[c],e=new diff_match_patch.patch_obj,e.diffs=[],f=0;f<d.diffs.length;f++)e.diffs[f]=d.diffs[f].slice();e.start1=d.start1,e.start2=d.start2,e.length1=d.length1,e.length2=d.length2,b[c]=e}return b},diff_match_patch.prototype.patch_apply=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(0==a.length)return[b,[]];for(a=this.patch_deepCopy(a),c=this.patch_addPadding(a),b=c+b+c,this.patch_splitMax(a),d=0,e=[],f=0;f<a.length;f++)if(g=a[f].start2+d,h=this.diff_text1(a[f].diffs),j=-1,h.length>this.Match_MaxBits?(i=this.match_main(b,h.substring(0,this.Match_MaxBits),g),-1!=i&&(j=this.match_main(b,h.substring(h.length-this.Match_MaxBits),g+h.length-this.Match_MaxBits),(-1==j||i>=j)&&(i=-1))):i=this.match_main(b,h,g),-1==i)e[f]=!1,d-=a[f].length2-a[f].length1;else if(e[f]=!0,d=i-g,k=-1==j?b.substring(i,i+h.length):b.substring(i,j+this.Match_MaxBits),h==k)b=b.substring(0,i)+this.diff_text2(a[f].diffs)+b.substring(i+h.length);else if(l=this.diff_main(h,k,!1),h.length>this.Match_MaxBits&&this.diff_levenshtein(l)/h.length>this.Patch_DeleteThreshold)e[f]=!1;else for(this.diff_cleanupSemanticLossless(l),m=0,o=0;o<a[f].diffs.length;o++)p=a[f].diffs[o],p[0]!==DIFF_EQUAL&&(n=this.diff_xIndex(l,m)),p[0]===DIFF_INSERT?b=b.substring(0,i+n)+p[1]+b.substring(i+n):p[0]===DIFF_DELETE&&(b=b.substring(0,i+n)+b.substring(i+this.diff_xIndex(l,m+p[1].length))),p[0]!==DIFF_DELETE&&(m+=p[1].length);return b=b.substring(c.length,b.length-c.length),[b,e]},diff_match_patch.prototype.patch_addPadding=function(a){var d,e,f,g,b=this.Patch_Margin,c="";for(d=1;b>=d;d++)c+=String.fromCharCode(d);for(d=0;d<a.length;d++)a[d].start1+=b,a[d].start2+=b;return e=a[0],f=e.diffs,0==f.length||f[0][0]!=DIFF_EQUAL?(f.unshift([DIFF_EQUAL,c]),e.start1-=b,e.start2-=b,e.length1+=b,e.length2+=b):b>f[0][1].length&&(g=b-f[0][1].length,f[0][1]=c.substring(f[0][1].length)+f[0][1],e.start1-=g,e.start2-=g,e.length1+=g,e.length2+=g),e=a[a.length-1],f=e.diffs,0==f.length||f[f.length-1][0]!=DIFF_EQUAL?(f.push([DIFF_EQUAL,c]),e.length1+=b,e.length2+=b):b>f[f.length-1][1].length&&(g=b-f[f.length-1][1].length,f[f.length-1][1]+=c.substring(0,g),e.length1+=g,e.length2+=g),c},diff_match_patch.prototype.patch_splitMax=function(a){var c,d,e,f,g,h,i,j,k,l,b=this.Match_MaxBits;for(c=0;c<a.length;c++)if(!(a[c].length1<=b))for(d=a[c],a.splice(c--,1),e=d.start1,f=d.start2,g="";0!==d.diffs.length;){for(h=new diff_match_patch.patch_obj,i=!0,h.start1=e-g.length,h.start2=f-g.length,""!==g&&(h.length1=h.length2=g.length,h.diffs.push([DIFF_EQUAL,g]));0!==d.diffs.length&&h.length1<b-this.Patch_Margin;)j=d.diffs[0][0],k=d.diffs[0][1],j===DIFF_INSERT?(h.length2+=k.length,f+=k.length,h.diffs.push(d.diffs.shift()),i=!1):j===DIFF_DELETE&&1==h.diffs.length&&h.diffs[0][0]==DIFF_EQUAL&&k.length>2*b?(h.length1+=k.length,e+=k.length,i=!1,h.diffs.push([j,k]),d.diffs.shift()):(k=k.substring(0,b-h.length1-this.Patch_Margin),h.length1+=k.length,e+=k.length,j===DIFF_EQUAL?(h.length2+=k.length,f+=k.length):i=!1,h.diffs.push([j,k]),k==d.diffs[0][1]?d.diffs.shift():d.diffs[0][1]=d.diffs[0][1].substring(k.length));g=this.diff_text2(h.diffs),g=g.substring(g.length-this.Patch_Margin),l=this.diff_text1(d.diffs).substring(0,this.Patch_Margin),""!==l&&(h.length1+=l.length,h.length2+=l.length,0!==h.diffs.length&&h.diffs[h.diffs.length-1][0]===DIFF_EQUAL?h.diffs[h.diffs.length-1][1]+=l:h.diffs.push([DIFF_EQUAL,l])),i||a.splice(++c,0,h)}},diff_match_patch.prototype.patch_toText=function(a){var c,b=[];for(c=0;c<a.length;c++)b[c]=a[c];return b.join("")},diff_match_patch.prototype.patch_fromText=function(a){var c,d,e,f,g,h,i,b=[];if(!a)return b;for(c=a.split("\n"),d=0,e=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;d<c.length;){if(f=c[d].match(e),!f)throw new Error("Invalid patch string: "+c[d]);for(g=new diff_match_patch.patch_obj,b.push(g),g.start1=parseInt(f[1],10),""===f[2]?(g.start1--,g.length1=1):"0"==f[2]?g.length1=0:(g.start1--,g.length1=parseInt(f[2],10)),g.start2=parseInt(f[3],10),""===f[4]?(g.start2--,g.length2=1):"0"==f[4]?g.length2=0:(g.start2--,g.length2=parseInt(f[4],10)),d++;d<c.length;){h=c[d].charAt(0);try{i=decodeURI(c[d].substring(1))}catch(j){throw new Error("Illegal escape in patch_fromText: "+i)}if("-"==h)g.diffs.push([DIFF_DELETE,i]);else if("+"==h)g.diffs.push([DIFF_INSERT,i]);else if(" "==h)g.diffs.push([DIFF_EQUAL,i]);else{if("@"==h)break;if(""!==h)throw new Error('Invalid patch mode "'+h+'" in: '+i)}d++}}return b},diff_match_patch.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},diff_match_patch.patch_obj.prototype.toString=function(){var a,b,c,d,e;for(a=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,b=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2,c=["@@ -"+a+" +"+b+" @@\n"],e=0;e<this.diffs.length;e++){switch(this.diffs[e][0]){case DIFF_INSERT:d="+";break;case DIFF_DELETE:d="-";break;case DIFF_EQUAL:d=" "}c[e+1]=d+encodeURI(this.diffs[e][1])+"\n"}return c.join("").replace(/%20/g," ")},this.diff_match_patch=diff_match_patch,this.DIFF_DELETE=DIFF_DELETE,this.DIFF_INSERT=DIFF_INSERT,this.DIFF_EQUAL=DIFF_EQUAL;